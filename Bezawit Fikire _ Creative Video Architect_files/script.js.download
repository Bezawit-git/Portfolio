// Initialize Lucide
lucide.createIcons();

// Premium Cursor Logic
const cursor = document.querySelector('.cursor');
const follower = document.querySelector('.cursor-follower');
const links = document.querySelectorAll('a, button, .work-item');

let mouseX = 0, mouseY = 0;
let followX = 0, followY = 0;

document.addEventListener('mousemove', (e) => {
    mouseX = e.clientX;
    mouseY = e.clientY;
    
    cursor.style.transform = `translate3d(${mouseX - 7.5}px, ${mouseY - 7.5}px, 0)`;
});

// Smooth follower interpolation
function animateFollower() {
    followX += (mouseX - followX) * 0.1;
    followY += (mouseY - followY) * 0.1;
    
    follower.style.transform = `translate3d(${followX - 20}px, ${followY - 20}px, 0)`;
    requestAnimationFrame(animateFollower);
}
animateFollower();

// Hover Effects
links.forEach(link => {
    link.addEventListener('mouseenter', () => {
        cursor.style.transform += ' scale(2.5)';
        cursor.style.background = 'var(--accent)';
        follower.style.transform += ' scale(0.5)';
        follower.style.borderColor = 'var(--accent)';
    });
    
    link.addEventListener('mouseleave', () => {
        cursor.style.background = 'white';
        follower.style.borderColor = 'var(--text-dim)';
    });
});

// Scroll Reveal
const observerOptions = {
    threshold: 0.1
};

const revealObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            entry.target.style.opacity = '1';
            entry.target.style.transform = 'translateY(0)';
            revealObserver.unobserve(entry.target);
        }
    });
}, observerOptions);

document.querySelectorAll('.section, .service-item, .work-item').forEach(el => {
    el.style.opacity = '0';
    el.style.transform = 'translateY(50px)';
    el.style.transition = 'all 1s cubic-bezier(0.16, 1, 0.3, 1)';
    revealObserver.observe(el);
});

// Magnetic Buttons
const magneticBtns = document.querySelectorAll('.btn, .category-tab');
magneticBtns.forEach(btn => {
    btn.addEventListener('mousemove', (e) => {
        const rect = btn.getBoundingClientRect();
        const x = e.clientX - rect.left - rect.width / 2;
        const y = e.clientY - rect.top - rect.height / 2;
        
        btn.style.transform = `translate(${x * 0.2}px, ${y * 0.2}px)`;
    });
    
    btn.addEventListener('mouseleave', () => {
        btn.style.transform = `translate(0, 0)`;
    });
});

// Category Filtering Logic
const categoryTabs = document.querySelectorAll('.category-tab');
const workItems = document.querySelectorAll('.work-item');

categoryTabs.forEach(tab => {
    tab.addEventListener('click', () => {
        // Update active tab UI
        categoryTabs.forEach(t => t.classList.remove('active'));
        tab.classList.add('active');

        const filter = tab.getAttribute('data-filter');

        workItems.forEach(item => {
            const category = item.getAttribute('data-category');
            
            if (filter === 'all' || category === filter) {
                item.style.display = 'block';
                setTimeout(() => {
                    item.style.opacity = '1';
                    item.style.transform = 'translateY(0) scale(1)';
                }, 10);
            } else {
                item.style.opacity = '0';
                item.style.transform = 'translateY(20px) scale(0.95)';
                setTimeout(() => {
                    item.style.display = 'none';
                }, 400);
            }
        });
    });
});
// Profile Picture Edit Logic
const profileEditTrigger = document.getElementById('profileEditTrigger');
const profileInput = document.getElementById('profileInput');
const displayProfileImg = document.getElementById('displayProfileImg');

if (profileEditTrigger && profileInput) {
    profileEditTrigger.addEventListener('click', () => {
        profileInput.click();
    });

    profileInput.addEventListener('change', (e) => {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = (event) => {
                displayProfileImg.src = event.target.result;
                console.log('Profile image updated locally');
            };
            reader.readAsDataURL(file);
        }
    });
}
